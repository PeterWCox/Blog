---
import BlogLayout from '../layouts/BlogLayout.astro';
import PostCard from '../components/PostCard.astro';
import { getCollection } from 'astro:content';

const posts = (await getCollection('blog')).sort(
	(a, b) => b.data.pubDate.getTime() - a.data.pubDate.getTime()
);
---

<BlogLayout title="Blog">
	<header class="header">
		<h1>Blog</h1>
		<p class="subtitle">Thoughts, ideas, and updates</p>
	</header>

	<section class="posts">
		{posts.length === 0 ? (
			<p class="empty">No posts yet. Check back soon!</p>
		) : (
			posts.map((post) => (
				<PostCard
					title={post.data.title}
					description={post.data.description}
					pubDate={post.data.pubDate}
					slug={post.slug}
				/>
			))
		)}
	</section>
</BlogLayout>

<style>
	.header {
		margin-bottom: 3rem;
		padding-bottom: 2rem;
		border-bottom: 1px solid #e5e5e5;
	}

	.header h1 {
		margin: 0 0 0.5rem 0;
		font-size: 2.5rem;
		font-weight: 700;
		line-height: 1.2;
	}

	.subtitle {
		margin: 0;
		color: #666;
		font-size: 1.125rem;
	}

	.posts {
		display: flex;
		flex-direction: column;
	}

	.empty {
		text-align: center;
		color: #666;
		padding: 3rem 0;
	}

	@media (max-width: 768px) {
		.header h1 {
			font-size: 2rem;
		}
	}
</style>
